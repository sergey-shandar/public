https://en.wikipedia.org/wiki/Combination



`Hello world!`

```
  H e l l o _ w o r l d !
0x48656C6C6F20776F726C6421

0x4   8   6   5   6   C   6   C   6   F   2   0   7   7   6   F   7   2   6   C   6   4   2   1
  010010000110010101101100011011000110111100100000011101110110111101110010011011000110010000100001
  _-__-____--__-_-_--_--___--_--___--_----__-______---_---_--_----_---__-__--_--___--__-____-____-
  0 12 3456  78 9 0  1  234  5  678  9    01 234567   8   9  0    1   23 45  6  789  01 2345 6789
  0               1                       2                  3                       4             50
   0  1    23  4 5 67 89   01 23   45 6789  0      123 456 78 9012 345  6  78 90   12  3    4    5
   0                       1                2                  3               4                   46
                                                                                                 = 96

96!/(46!50!) = 5925514768686681770366994528 < 2^93

     0  1   2  3  4  5   6  7   8   9 10  11  12 13  14 15  16  17 18 19 20  21 22 23  24 25  26 27 28  29 30 31  32 33  34  35 36  37 38 39
   |01_00_100_00_11_00_101_01_101_100_01_101_100_01_101_11_100_100_00_00_11_101_11_01_101_11_101_11_00_100_11_01_100_01_100_100_00_100_00_11
   | 1  0   2  0  4  0   3  1   3   2  1   3   2  1   3  4   2   2  0  0  4   3  4  1   3  4   3  4  0   2  4  1   2  1   2   2  0   2  0  4
00 | |  0   |  1  |  2   |  |   |   |  |   |   |  |   |  |   |   |  3  4  |   |  |  |   |  |   |  |  5   |  |  |   |  |   |   |  6   |  7  |  8
01 | 0      |     |      |  1   |   |  2   |   |  3   |  |   |   |        |   |  |  4   |  |   |  |      |  |  5   |  6   |   |      |     |  7
100|        0     |      |      |   1      |   2      |  |   3   4        |   |  |      |  |   |  |      5  |      6      7   8      9     | 10
101|              |      0      1          2          3  |                |   4  |      5  |   6  |         |                              |  7
11 |              0                                      1                2      3         4      5         6                              7  8
                                                                                                                                           : 40

40!/(8!7!10!7!8!) = 5444774722242274120416000 < 2^83

1020403132132134220043413434024121220204 = 5^40 < 2^93

      0  1  2  3   4   5   6  7   8  9  10 11  12 13  14 15 16
   |102_04_03_13_213_213_422_00_434_13_434_02_412_12_202_04
00 |  |  |  |  |   |   |   |  0   |  |   |  |   |  |   |  |  1
02 |  |  |  |  |   |   |   |      |  |   |  0   |  |   |  |  1    2
03 |  |  |  0  |   |   |   |      |  |   |      |  |   |  |  1    3
04 |  |  0     |   |   |   |      |  |   |      |  |   |  1  2 x  5
102|  0        |   |   |   |      |  |   |      |  |   |     1    6
12 |           |   |   |   |      |  |   |      |  0   |     1    7
13 |           0   |   |   |      |  1   |      |      |     2 x  9
202|               |   |   |      |      |      |      0     1   10
213|               0   1   |      |      |      |            2 x 12
412|                       |      |      |      0            1   13
422|                       0      |      |                   1   14
434|                              0      1                   2 x 16

129^16 < 2^113

16!/(2!2!2!2!) = 1307674368000n < 2^41

102_04_03_13 | 213_213 | 422_00_434 | 13_434 | 02_412 | 12_202 | 04 00 00
```

```
01001000
0 12 345 6
 0  1    2
       = 8

0: X0 / 8 = (D,R): R of [0;6) | X1 = D * (R - 0) | 5:2 7
1: X1 / 7 = (D,R): R of [5;7) | X2 = D * (R - 5) | 5:1 6
0: X2 / 6 = (D,R): R of [0;5) | X3 = D * (R - 0) | 4:1 5
0: X3 / 5 = (D,R): R of [0;4) | X4 = D * (R - 0) | 3:1 4
1: X4 / 4 = (D,R): R of [3;4) | X5 = D * (R - 3) | 3:0 3
0: X5 / 3 = (D,R): R of [0;3) | X6 = D * (R - 0) | 2:0 2
0: X6 / 2 = (D,R): R of [0;2) | X7 = D * (R - 0) | 1:0 1
0: X8 / 1 = (D,R): R of [0;1) | X8 = D * (R - 0) | 0:0 0

n!/(k!(n-k)!) = 8!/(2!6!) = 40320 / (2 * 720) = 28

---------------------------------
4x4x4x4x4x4x4x4   4^8   65536
--------------- = --- = ----- ~90
3x1x3x3x1x3x3x3   3^6     729

0: x0 / 4 = (d, m). m < 3: 0. x1 = d * 3 + m: x0 = 0/4 + x1 * 3/4
1: x1 / 4 = (d, m). m = 3: 1. x2 = d        : x1 = 3/4 + x2    /4
0: x2 / 4 = (d, m). m < 3: 0. x3 = d * 3 + m: x2 = 0/4 + x3 * 3/4
0: x3 / 4 = (d, m). m < 3: 0. x4 = d * 3 + m: x3 = 0/4 + x4 * 3/4
1: x4 / 4 = (d, m). m = 3: 1. x5 = d        : x4 = 3/4 + x5    /4
0: x5 / 4 = (d, m). m < 3: 0. x6 = d * 3 + m: x5 = 0/4 + x6 * 3/4
0: x6 / 4 = (d, m). m < 3: 0. x7 = d * 3 + m: x6 = 0/4 + x7 * 3/4:
0: x7 / 4 = (d, m). m < 1: 0. x8 = d * 3 + m: x7 = 0/4 + x8 * 3/4:

```

```
1
1  |
1  2
1  3   |
1  4   6
1  5  10    |
1  6  15   20
1  7  21   35    |
1  8  28   56   70
1  9  36   84  126     |
1 10  45  120  210   252
1 11  55  165  330   462     |
1 12  66  220  495   792   924
1 13  78  286  715  1287  1716      |
1 14  91  364 1001  2002  3003   3432
1 15 105  455 1365  3003  5005   6435      |
1 16 120  560 1820  4368  8008  11440  12870
1 17 136  680 2380  6188 12376  19448  24310      |
1 18 153  816 3060  8568 18564  31824  43758  48620
1 19 171  969 3876 11628 27132  50388  75582  92378      |
1 20 190 1140 4845 15504 38760  77520 125970 167960 184756
1 21 210 1330 5985 20349 54264 116280 203490 293930 352716 |
```

## Theory

We have a number `c` which is in the interval `[0, M)`. Also `c/M` in `[0, 1[`.

- extract most significant digit based on `R`: `c * R / M = (d c1)`, where `d` in `[0, R)` and `c1` in `[0, M/R)`.
- decode `d: [0, R)` and `c1: [0, M/R)` to `c: [0, M)`: `c = d * M / R + c1`.

```
01001000
0 12 345 6
 0  1    2
       = 8

frequency: 1:3
```

Save into one byte with base `R = 4` we have 4 numbers

Non adaptive:

```
01001000
M = 1
0: M = 4/3 = 1+
1: M = 16/3 = 5+
0: M = 64/9 = 7+
0: M = 256/27 = 9+
1: M = 1024/27 = 37+
0: M = 4096/81 = 50+
0: M = 16384/243 = 67+
0: M = 65536/729 = 89+
```

Adaptive:

```
01001000
M = 1 | 6:2 8

0: M =    8 /   6 =  4/3 =  1+ | 5:2 7 | c0 = (0 + 6 * c1) / 8 = (6 * 6/7) / 8 = (9 * 4 / 7) / (4 * 2) = 9 / 14
1: M =  4*7 / 3*2 = 14/3 =  4+ | 5:1 6 | c1 = (5 + 2 * c2) / 7 = (5 + 2 * 1/2) / 7 = 6/7
0: M = 14*6 / 3*5 = 28/5 =  5+ | 4:1 5 | c2 = (0 + 5 * c3) / 6 = (5 * 3/5) / 6 = 1/2
0: M = 28*5 / 5*4 =  7/1 =  7  | 3:1 4 | c3 = (0 + 4 * c4) / 5 = (4 * 3/4) / 5 = 3/5
1: M =  7*4 / 1   = 28/1 = 28  | 3:0 3 | c4 = (3 + 1 * c5) / 4 = 3/4
0: M = 28*3 / 3   = 28/1 = 28  | 2:0 2 | c5 = (0 + 3 * c6) / 3 = 0
0: M = 28*2 / 2   = 28/1 = 28  | 1:0 1 | c6 = (0 + 2 * c7) / 2 = 0
0: M = 28*1 / 1   = 28/1 = 28  | 0:0 0 | c7 = (0 + 1 * c8) / 1 = 0

28 < 2^5

c0 = 9/14

c0: (9 * 4)/14 = 18/7 = 2 + 4/7 < 3: x = `0`, c1 = c0 * 4 / 3 = (9/14) * (4/3) = 6/7
c1: (6 * 7)/7 = 6 >= 5: x = `01`, c2 = (c1 * 7 - 5) / 2 = (6 - 5) / 2 = 1/2
c2: ...

0000_0011 => 0
0000_0101 => 1
0000_0110 => 2
0000_1001 => 3
0000_1010 => 4
0000_1100 => 5
0001_0001 => 6
0001_0010 => 7
0001_0100 => 8
0001_1000 => 9
0010_0001 => 10
0010_0010 => 11
0010_0100 => 12
0010_1000 => 13
0011_0000 => 14
0100_0001 => 15
0100_0010 => 16
0100_0100 => 17
0100_1000 => 18
0101_0000 => 19
0110_0000 => 20
1000_0001 => 21
1000_0010 => 22
1000_0100 => 23
1000_1000 => 24
1001_0000 => 25
1010_0000 => 26
1100_0000 => 27

n!/(n0! * n1! * ... * nm!)
```
